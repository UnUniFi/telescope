<div class="mx-auto max-w-screen-xl">
  <div class="text-xl breadcrumbs">
    <ul>
      <li routerLink="/yield-aggregator/vaults"><a>Vaults</a></li>
      <li routerLink="..">
        <a>Strategies of {{ displaySymbol }}</a>
      </li>
      <li>{{ strategy?.name }}</li>
    </ul>
  </div>
  <div class="w-full md:w-auto mb-8">
    <div class="card bg-base-100 shadow-xl w-full">
      <div #cardRef class="card-body">
        <h2 class="card-title">
          <ng-container *ngIf="symbolImage">
            <div class="avatar">
              <div class="mask mask-circle w-6 h-6">
                <img src="{{ symbolImage }}" alt="Asset Symbol" />
              </div>
            </div>
          </ng-container>
          <ng-container *ngIf="!symbolImage">
            <span class="material-symbols-outlined">question_mark</span>
          </ng-container>
          <span>
            {{ strategy?.name }}
          </span>
          <div class="badge badge-primary">{{ displaySymbol }}#{{ id }}</div>
        </h2>

        <table class="table w-full">
          <tbody>
            <tr>
              <td>Strategy ID</td>
              <td>{{ id }}</td>
            </tr>
            <tr>
              <td>Asset</td>
              <td>{{ displaySymbol }}</td>
            </tr>
            <tr>
              <td>Contract Address</td>
              <td class="font-mono break-all">{{ strategy?.contract_address }}</td>
            </tr>
            <tr>
              <td>Git URL</td>
              <td class="break-all">
                <a href="{{ strategy?.git_url }}" target="_blank">{{ strategy?.git_url }}</a>
              </td>
            </tr>
          </tbody>
        </table>

        <div class="stats flex flex-col md:flex-row">
          <div class="stat">
            <div class="stat-title">APR</div>
            <div class="stat-value text-secondary">{{ strategyAPR | percent : '1.2-2' }}</div>
            <div class="stat-desc"></div>
          </div>
        </div>

        <!-- <div class="stats flex flex-col md:flex-row">
          <div class="stat">
            <div class="stat-title">APR</div>
            <div class="stat-value text-secondary">12.34%</div>
            <div class="stat-desc"></div>
          </div>
          <div class="stat">
            <div class="stat-title">Capital Allocation</div>
            <div class="stat-value text-primary">1234.56 axlUSDC</div>
            <div class="stat-desc"></div>
          </div>
          <div class="stat">
            <div class="stat-title">Performance Fee</div>
            <div class="stat-value">0.12%</div>
            <div class="stat-desc"></div>
          </div>
        </div>
        <p style="white-space: pre-wrap">
          {{ description }}
        </p> -->

        <!-- <h3 class="mt-4">Historical APR (Demo)</h3>
        <div class="flex w-full justify-center" #chartRef>
          <google-chart
            [title]="chartTitle"
            [type]="chartType"
            [data]="chartData"
            [columns]="chartColumnNames"
            [options]="chartOptions"
          >
          </google-chart>
        </div> -->
      </div>
    </div>
  </div>

  <h3>Vaults that contains this strategy</h3>
  <div class="flex flex-row flex-wrap -mr-12 -mb-12">
    <div *ngFor="let vault of vaults; let i = index" class="pr-12 pb-12 w-full md:w-1/2 xl:w-1/3">
      <div class="card bg-base-100 shadow-xl w-full">
        <div class="card-body">
          <h2 class="card-title break-all">
            <ng-container *ngIf="symbolImage">
              <div class="avatar">
                <div class="mask mask-circle w-6 h-6">
                  <img src="{{ symbolImage }}" alt="Asset Symbol" />
                </div>
              </div>
            </ng-container>
            <ng-container *ngIf="!symbolImage">
              <span class="material-symbols-outlined">question_mark</span>
            </ng-container>
            <span>Vault #{{ vault.id }}</span>
          </h2>

          <div class="stats">
            <div class="stat" *ngIf="weights">
              <div class="stat-title">Weight</div>
              <div class="stat-value">{{ weights[i] | percent : '1.0-2' }}</div>
              <div class="stat-desc"></div>
            </div>
          </div>

          <button
            routerLink="/yield-aggregator/vaults/{{ vault.id }}"
            class="btn btn-outline btn-info"
          >
            View
          </button>
        </div>
      </div>
    </div>
    <p *ngIf="!vaults?.length" class="ml-4">There is no vault.</p>
  </div>
</div>
