<h2 class="mb-0">Perpetual Futures</h2>
<mat-card class="mb-4">
  <div class="flex flex-row content-start items-start">
    <mat-form-field class="min-w-0">
      <mat-label>Markets</mat-label>
      <mat-select [(value)]="selectedConfig" (valueChange)="onChangeConfig($event)">
        <mat-option *ngFor="let conf of configs" [value]="conf">
          {{ conf }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field class="min-w-0">
      <mat-label>Price</mat-label>
      <input #priceRef type="text" name="price" [ngModel]="asset.price" matInput readonly />
    </mat-form-field>
    <mat-form-field class="min-w-0">
      <mat-label>24h Change</mat-label>
      <input #changeRef type="text" name="change" [ngModel]="changePercentage" matInput readonly />
    </mat-form-field>
    <mat-form-field class="min-w-0">
      <mat-label>24h High</mat-label>
      <input #highRef type="text" name="high" [ngModel]="asset.high" matInput readonly />
    </mat-form-field>
    <mat-form-field class="min-w-0">
      <mat-label>24h Low</mat-label>
      <input #lowRef type="text" name="low" [ngModel]="asset.low" matInput readonly />
    </mat-form-field>
  </div>
  <!-- TradingView Widget BEGIN -->
  <div class="tradingview-widget-container">
    <div id="tradingview_5b3c4" class="h-96"></div>
    <div class="tradingview-widget-copyright">
      <a
        href="https://www.tradingview.com/symbols/ETHUSD/?exchange=COINBASE"
        rel="noopener"
        target="_blank"
      ></a>
      by TradingView
    </div>
  </div>

  <!-- <button class="w-1/2 mt-4" mat-flat-button color="primary">
    <mat-icon>trending_up</mat-icon>
    <span>Long</span>
  </button>
  <button class="w-1/2 mt-4" mat-flat-button color="accent">
    <mat-icon>trending_down</mat-icon>
    <span>Short</span>
  </button> -->
</mat-card>

<mat-card class="mb-4">
  <mat-button-toggle-group
    class="flex mb-4"
    #tgl="matButtonToggleGroup"
    (change)="onToggleChange(tgl.value)"
    value="long"
  >
    <mat-button-toggle class="flex-auto" value="long">
      <mat-icon>trending_up</mat-icon>Long
    </mat-button-toggle>
    <mat-button-toggle class="flex-auto" value="short">
      <mat-icon>trending_down</mat-icon>Short
    </mat-button-toggle>
  </mat-button-toggle-group>

  <div class="flex flex-row content-center items-center">
    <mat-form-field class="flex-auto">
      <mat-label>Pay</mat-label>
      <input
        matNativeControl
        #payRef
        name="pay"
        [(ngModel)]="payAmount"
        (ngModelChange)="onChangePayAmount()"
        [min]="0"
        required
      />
      <!-- <mat-error>Required!</mat-error> -->
    </mat-form-field>
    <mat-form-field>
      <mat-select [(value)]="selectedPayAssets">
        <mat-option *ngFor="let asset of payAssets" [value]="asset">
          {{ asset }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <div class="flex flex-row content-center items-center">
    <mat-form-field class="flex-auto">
      <mat-label>Long</mat-label>
      <input
        matNativeControl
        #tradeRef
        name="trade"
        [(ngModel)]="tradeAmount"
        (ngModelChange)="onChangeTradeAmount()"
        [min]="0"
        required
      />
      <!-- <mat-error>Required!</mat-error> -->
    </mat-form-field>
    <mat-form-field>
      <mat-select [(value)]="selectedTradeAssets">
        <mat-option *ngFor="let asset of tradeAssets" [value]="asset">
          {{ asset }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <h3>Leverage</h3>
  <mat-checkbox class="mb-4" color="primary"> Enable {{ leverage }}x </mat-checkbox>
  <mat-slider
    thumbLabel
    class="w-full"
    [max]="50"
    [min]="1.1"
    [step]="0.1"
    [(ngModel)]="leverage"
    name="leverage-slider"
  >
  </mat-slider>
  <button mat-flat-button class="w-full mt-4" color="accent">Order</button>
</mat-card>

<mat-card class="mb-4">
  <ng-container *ngIf="tgl.value === 'long'; then long; else short"></ng-container>
  <ng-template #long>
    <h3>Long Info</h3>
    <mat-list>
      <mat-list-item>
        <span class="whitespace-nowrap">Entry Price:</span>
        <span class="flex-auto"></span>
        <span class="ml-2 break-all text-sm sm:text-base">$1300</span>
        <mat-divider></mat-divider>
      </mat-list-item>
      <mat-list-item>
        <span class="whitespace-nowrap">Exit Price:</span>
        <span class="flex-auto"></span>
        <span class="ml-2 break-all text-sm sm:text-base">$1300</span>
        <mat-divider></mat-divider>
      </mat-list-item>
      <mat-list-item>
        <span class="whitespace-nowrap">Borrow Fee:</span>
        <span class="flex-auto"></span>
        <span class="ml-2 break-all text-sm sm:text-base">0.0007%/h</span>
        <mat-divider></mat-divider>
      </mat-list-item>
      <mat-list-item>
        <span class="whitespace-nowrap">Available liquidity:</span>
        <span class="flex-auto"></span>
        <span class="ml-2 break-all text-sm sm:text-base">$23403456</span>
      </mat-list-item>
    </mat-list>
  </ng-template>
  <ng-template #short>
    <h3>Short Info</h3>
  </ng-template>
</mat-card>
