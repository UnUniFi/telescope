<div class="flex flex-col items-center">
  <img class="m-6 w-12 h-12" src="assets/favicon.png" alt="UnUniFi logo" />
  <div class="font-bold text-xl m-3">Delegate to this validator</div>
</div>
<mat-list>
  <mat-label>To. (Validator Address)</mat-label>
  <mat-list-item>
    <mat-icon matListIcon [ngStyle]="{ color: getColorCode(validator?.operator_address!) }"
      >circle</mat-icon
    >
    <div mat-line>
      <span>{{ validator?.operator_address }}</span>
    </div>
  </mat-list-item>
</mat-list>

<mat-list>
  <mat-label>From. (Delegator Address)</mat-label>
  <mat-list-item>
    <mat-icon matListIcon [ngStyle]="{ color: getColorCode(currentStoredWallet?.address!) }"
      >circle</mat-icon
    >
    <div mat-line>
      <span>{{ currentStoredWallet?.address }}</span>
    </div>
  </mat-list-item>
</mat-list>

<form #formRef="ngForm" (submit)="onSubmit()">
  <div class="flex flex-col content-content lg:flex-row">
    <mat-form-field class="flex-auto">
      <mat-label>Delegate Denom</mat-label>
      <input
        [(ngModel)]="selectedAmount && selectedAmount.denom"
        name="delegate-denom"
        matInput
        type="text"
        required
        readonly
      />
    </mat-form-field>
    <mat-form-field class="flex-auto">
      <mat-label>Delegate Amount</mat-label>
      <input
        [(ngModel)]="selectedAmount && selectedAmount.amount"
        name="delegate-amount"
        matInput
        type="number"
        pattern="^\d+$"
        [min]="0"
        required
      />
    </mat-form-field>
    <mat-form-field class="flex-auto">
      <mat-label>Balance</mat-label>
      <input
        [(ngModel)]="uguuBalance"
        name="delegate-balance"
        matInput
        type="number"
        pattern="^\d+$"
        [min]="0"
        required
        readonly
      />
    </mat-form-field>
  </div>

  <h3 class="pt-3">Gas Settings</h3>
  <mat-form-field class="w-full">
    <mat-label>Gas Ratio</mat-label>
    <input [(ngModel)]="gasRatio" name="gas-ratio" matInput type="number" required />
  </mat-form-field>
  <div class="flex flex-row content-content items-end mb-4">
    <button mat-flat-button type="button" class="flex-auto mr-2" (click)="changeGasRatio(1.1)">
      Low
    </button>
    <button
      mat-flat-button
      type="button"
      class="flex-auto mr-2"
      color="accent"
      (click)="changeGasRatio(2)"
    >
      Middle
    </button>
    <button
      mat-flat-button
      type="button"
      class="flex-auto"
      color="primary"
      (click)="changeGasRatio(3)"
    >
      High
    </button>
  </div>

  <mat-accordion>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title> Advanced </mat-panel-title>
        <mat-panel-description> Change Minimum Gas </mat-panel-description>
      </mat-expansion-panel-header>
      <div class="flex flex-row content-content items-end">
        <mat-form-field class="flex-auto">
          <mat-label>Minimum Gas Denom</mat-label>
          <mat-select
            [(ngModel)]="selectedGasPrice && selectedGasPrice.denom"
            name="minimum-gas-denom"
            required
            (valueChange)="onMinimumGasDenomChanged($event)"
          >
            <mat-option
              *ngFor="let minimumGasPriceOption of minimumGasPrices"
              [value]="minimumGasPriceOption.denom"
            >
              {{ minimumGasPriceOption.denom }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field class="flex-auto">
          <mat-label>Minimum Gas Price</mat-label>
          <input
            [(ngModel)]="selectedGasPrice && selectedGasPrice.amount"
            #minimumGasPriceRef
            name="minimum-gas-price"
            matInput
            type="number"
            [min]="0"
            required
          />
        </mat-form-field>
      </div>
      <mat-slider
        class="w-full"
        [max]="1"
        [min]="0"
        [step]="0.015"
        [(ngModel)]="selectedGasPrice && selectedGasPrice.amount"
        name="minimum-gas-price-slider"
      >
      </mat-slider>
    </mat-expansion-panel>
  </mat-accordion>

  <button mat-flat-button class="w-full mt-4" color="accent" [disabled]="formRef.invalid">
    Delegate
  </button>
</form>
